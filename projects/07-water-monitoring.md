# 💧 수질 모니터링 시스템

## 📋 프로젝트 개요

**작업 기간**: 2024.03 - 2024.05  
**프로젝트 분류**: 팀 프로젝트  
**참여 인원**: 4명  
**기여도**: MCU 펌웨어 및 데이터 처리 (35%)

### 프로젝트 설명

수온, pH 값 등을 모니터링하는 다중 센서 시스템입니다. Arduino 기반 MCU에서 센서 데이터를 수집하고 SD 카드에 기록하며, 정상 범위 초과 시 알람을 울립니다. 이 프로젝트는 **MCU 펌웨어 개발, 센서 인터페이싱, 데이터 안정성**의 경험을 제공합니다.

---

## 🎯 구현 내용

### ✅ 다중 센서 통합 및 데이터 수집

**사용 센서**
- **수심 센서**: 압력 기반 깊이 측정
- **온도 센서 (DS18B20)**: 1-Wire 통신
- **pH 센서**: 아날로그 전압 입력
- **탁도 센서**: 아날로그 입력

**성과**
- 데이터 손실률: 0%
- 저장 안정성: 99.9%
- 파일 포맷: CSV (엑셀 호환)

---

### ✅ 알람 및 이상 감지 시스템

**담당 내용**
- 센서 값이 범위를 벗어나면 알람 발생
- EEPROM에 범위 설정값 저장
- 다양한 알람 상태 구분

**성과**
- 알람 감지율: 100%
- 오경보율: < 1%
- 응답 시간: < 100ms

---

## 🛠️ 기술 스택

### 하드웨어
- **MCU**: Arduino Mega 2560
- **센서**: 압력, DS18B20, pH, 탁도 센서
- **메모리**: SD 카드 모듈
- **알림**: LED, Buzzer

### 소프트웨어
- **언어**: Arduino C++
- **라이브러리**: OneWire, DallasTemperature, SD
- **데이터 포맷**: CSV
- **저장소**: EEPROM, SD 카드

### 개발 도구
- **IDE**: Arduino IDE
- **Debug**: Serial Monitor
- **데이터 분석**: Excel, Python

---

## 📊 데이터 처리 흐름

```
┌──────────────────────────────────────────┐
│  센서 데이터 수집 (10Hz)                  │
│  - 압력 센서                             │
│  - DS18B20 온도 센서                     │
│  - pH 센서                               │
│  - 탁도 센서                             │
└────────────┬─────────────────────────────┘
             │
             ▼
┌──────────────────────────────────────────┐
│  데이터 검증 및 범위 확인                  │
│  - 센서 오류 감지                        │
│  - 음수 값 필터링                        │
│  - 범위 이상 판단                        │
└────────────┬─────────────────────────────┘
             │
      ┌──────┴──────┐
      │             │
      ▼             ▼
┌──────────┐  ┌──────────┐
│정상 범위 │  │범위 초과 │
└────┬─────┘  └─────┬────┘
     │              │
     ▼              ▼
 ┌─────────┐  ┌───────────┐
 │SD 저장  │  │알람 발생  │
 │   &     │  │ - LED     │
 │시리얼출력│  │ - Buzzer  │
 └─────────┘  │ - 로그    │
              └───────────┘
```

---

## 📊 센서 성능

| 센서 | 범위 | 정확도 | 응답시간 |
|------|------|--------|----------|
| 압력 (깊이) | 0-10m | ±0.1m | 100ms |
| 온도 (DS18B20) | -55 ~ 125°C | ±0.5°C | 750ms |
| pH | 0-14 | ±0.2 | 100ms |
| 탁도 | 0-1000 NTU | ±5% | 100ms |

---

## 🎓 배운 점

### 1. MCU 펌웨어 개발 기초
- 아날로그/디지털 입력 처리
- 1-Wire 통신 프로토콜
- EEPROM 메모리 관리

### 2. 센서 캘리브레이션
- 원시 아날로그 값을 실제 물리량으로 변환
- 센서 오류 처리
- 노이즈 필터링

### 3. 데이터 안정성
- 데이터 손실 방지
- 비휘발성 저장장치(SD 카드) 활용
- 로그 포맷 설계

### 4. 실시간 모니터링 시스템
- 타이밍 크리티컬한 알람
- 다중 센서 동기화
- 상태 관리

---

## 💡 개선 기회

### 단기 개선
- [ ] 무선 데이터 전송 (WiFi/4G)
- [ ] 클라우드 연동
- [ ] 웹 대시보드

### 장기 개선
- [ ] 머신러닝 이상 탐지
- [ ] 예측 모델 구축
- [ ] 자동 제어 시스템

---

## 🔗 관련 자료

- **Arduino**: [https://www.arduino.cc/]
- **DallasTemperature Library**: [https://github.com/milesburton/Arduino-Temperature-Control-Library]

---

## ✅ 최종 평가

### 강점
✅ MCU 펌웨어 개발 경험  
✅ 다중 센서 통합  
✅ 데이터 안정성 및 신뢰성  
✅ 실시간 모니터링 시스템  

### 기술적 성과
- 다양한 센서 인터페이싱
- 안정적인 데이터 로깅
- 신뢰할 수 있는 알람 시스템

---

**[← 포트폴리오로 돌아가기](../README.md)**  
**[← 이전 프로젝트](./04-smartHome-esp32.md)**
